var te=Object.defineProperty,se=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var D=(t,e,n)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R=(t,e)=>{for(var n in e||(e={}))oe.call(e,n)&&D(t,n,e[n]);if(M)for(var n of M(e))ae.call(e,n)&&D(t,n,e[n]);return t},A=(t,e)=>se(t,ne(e));import{o as le,a as re,d as x,r as $,b as ie,w as F,n as ue,c as r,e as i,f as s,F as k,g as H,h,t as p,u as g,i as v,j as b,k as ce,l as O,m as P,p as S,q as K,v as Y,J as C,s as q,x as _,H as de,y as N,K as me,z as pe,A as _e,B as z,C as fe}from"./vendor.ac6243e4.js";function Ss(){import("data:text/javascript,")}const ve=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};ve();const W=function(t){return typeof t=="object"&&t!==null&&t.type==="HISTORY_STATE_TYPE"&&typeof t.location=="string"};function he(t){function e(a){window.history.pushState({type:"HISTORY_STATE_TYPE",location:a},"")}function n(a){W(a.state)&&t(a.state.location)}return le(()=>{window.addEventListener("popstate",n),W(window.history.state)&&t(window.history.state.location)}),re(()=>{window.removeEventListener("popstate",n)}),{pushState:e}}const ye={class:"mb-2"},xe={class:"mb-2"},$e=s("label",{class:"mr-1 font-semibold"},"headers",-1),ke={class:"flex sm:flex-row flex-col sm:items-center space-between sm:my-1 my-2"},ge={class:"flex-1 sm:mr-1 sm:mb-0 mb-1"},be=["value","onChange"],we={class:"sm:w-8/12 flex"},Te=["value","onChange"],Ce=["onClick"],Se=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Ve=[Se],Re=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ae=h(" Add "),He=[Re,Ae],Oe=x({props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,a=$([]);ie(()=>{a.value=[]}),F(()=>n.modelValue,async(u,m)=>{if(u.length-m.length==1){await ue();const d=u.length-1;a.value[d].focus()}});const o=()=>{e("update:modelValue",[...n.modelValue,{name:"",value:""}])},l=(u,m,d)=>{e("update:modelValue",n.modelValue.map((y,w)=>u===w?A(R({},y),{[m]:d}):y))},c=u=>{e("update:modelValue",n.modelValue.filter((m,d)=>d!==u))};return(u,m)=>(r(),i("div",null,[s("div",ye,[s("div",xe,[$e,(r(!0),i(k,null,H(t.modelValue,(d,y)=>(r(),i("div",ke,[s("div",ge,[s("input",{class:"w-full text-sm py-1 px-2",type:"text",name:"",id:"",placeholder:"Header name",value:d.name,ref_for:!0,ref:w=>a.value[y]=w,onChange:w=>l(y,"name",w.target.value)},null,40,be)]),s("div",we,[s("input",{class:"w-full text-sm py-1 px-2",type:"text",name:"",id:"",placeholder:"Header value",value:d.value,onChange:w=>l(y,"value",w.target.value)},null,40,Te),s("button",{class:"text-red-500 mx-2",onClick:w=>c(y),title:"Remove header"},Ve,8,Ce)])]))),256))])]),s("button",{class:"flex items-center text-primary-800 hover:text-primary-900 font-semibold text-sm py-1",onClick:o,title:"Add header"},He)]))}}),Q=["include","omit","same-origin"],X=["cors","navigate","no-cors","same-origin"],qe={class:"flex items-center mb-3"},Ne=s("h1",{class:"font-bold"}," Configure HTTP client ",-1),Pe=["title"],Be={key:0},Ee={class:"mb-2"},je={class:"mb-1 -m-1 flex flex-wrap"},Ie={class:"m-1 flex items-center"},Le=s("label",{class:"mr-1 font-semibold",for:"credentials"},"credentials",-1),Ge=["value"],Ue=["value"],Je={class:"m-1 flex items-center"},Me=s("label",{class:"mr-1 font-semibold",for:"mode"},"mode",-1),De=["value"],Fe=["value"],Ke=x({props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,a=$(!1),o=u=>{if(u.target){const m=u.target.value;Q.includes(m)&&e("update:modelValue",A(R({},n.modelValue),{credentials:m}))}},l=u=>{if(u.target){const m=u.target.value;X.includes(m)&&e("update:modelValue",A(R({},n.modelValue),{mode:m}))}},c=u=>{e("update:modelValue",A(R({},n.modelValue),{headers:[...u]}))};return(u,m)=>(r(),i("div",null,[s("div",qe,[Ne,s("button",{class:"text-primary-800 hover:text-primary-900 font-semibold text-sm mx-2",onClick:m[0]||(m[0]=d=>a.value=!a.value),title:a.value?"Hide HTTP client configuration form":"Show HTTP client configuration form"},p(a.value?"Hide":"Show"),9,Pe)]),a.value?(r(),i("div",Be,[s("div",Ee,[s("div",je,[s("div",Ie,[Le,s("select",{class:"text-sm py-1 pl-1",id:"credentials",value:t.modelValue.credentials,onChange:o},[(r(!0),i(k,null,H(g(Q),d=>(r(),i("option",{key:d,value:d},p(d),9,Ue))),128))],40,Ge)]),s("div",Je,[Me,s("select",{class:"text-sm py-1 pl-1",id:"mode",value:t.modelValue.mode,onChange:l},[(r(!0),i(k,null,H(g(X),d=>(r(),i("option",{key:d,value:d},p(d),9,Fe))),128))],40,De)])]),v(Oe,{modelValue:t.modelValue.headers,"onUpdate:modelValue":c},null,8,["modelValue"])])])):b("",!0)]))}}),Ye={class:"flex items-center"},ze=["value"],We=x({props:{location:null},emits:["navigate","update:location"],setup(t,{emit:e}){return(n,a)=>(r(),i("div",Ye,[s("form",{onSubmit:a[1]||(a[1]=ce(o=>n.$emit("navigate",t.location),["prevent"])),class:"flex-1"},[s("input",{class:"w-full",placeholder:"JSON:API endpoint URL",type:"text",value:t.location,onInput:a[0]||(a[0]=o=>n.$emit("update:location",o.target.value))},null,40,ze)],32)]))}}),Qe=s("h3",{class:"text-lg"},"Request",-1),Xe=s("dt",null,"URL",-1),Ze={class:"mb-1"},et={class:"overflow-y-auto text-xs text-gray-700"},tt=s("dt",null,"Headers",-1),st={class:"mb-1"},nt={class:"overflow-y-auto text-xs text-gray-700"},ot=s("dt",null,"Body",-1),at={class:"mb-1"},lt={class:"overflow-y-auto text-xs text-gray-700"},rt=x({props:{request:null},setup(t){return(e,n)=>(r(),i(k,null,[Qe,s("dl",null,[Xe,s("dd",Ze,[s("pre",et,p(t.request.url),1)]),tt,s("dd",st,[s("pre",nt,p(t.request.headers),1)]),ot,s("dd",at,[s("pre",lt,p(t.request.body),1)])])],64))}}),it=s("h3",{class:"text-lg"},"Response",-1),ut=s("dt",null,"Status",-1),ct={class:"mb-1"},dt={class:"overflow-y-auto text-xs text-gray-700"},mt=s("dt",null,"Headers",-1),pt={class:"mb-1"},_t={class:"overflow-y-auto text-xs text-gray-700"},ft=s("dt",null,"Body",-1),vt={class:"mb-1"},ht={class:"overflow-y-auto text-xs text-gray-700"},yt=x({props:{response:null},setup(t){const e=t,n=O(()=>{try{return e.response.body?JSON.stringify(JSON.parse(e.response.body),null,2):""}catch{return""}});return(a,o)=>(r(),i(k,null,[it,s("dl",null,[ut,s("dd",ct,[s("pre",dt,p(t.response.status),1)]),mt,s("dd",pt,[s("pre",_t,p(t.response.headers),1)]),ft,s("dd",vt,[s("pre",ht,p(g(n)),1)])])],64))}}),xt=["title"],$t={class:"text-black mr-1"},Z=x({props:{expanded:{type:Boolean}},emits:["update:expanded"],setup(t){return(e,n)=>(r(),i("button",{onClick:n[0]||(n[0]=a=>e.$emit("update:expanded",!t.expanded)),title:t.expanded?"Expand":"Collapse"},[s("span",$t,p(t.expanded?"-":"+"),1),P(e.$slots,"default")],8,xt))}});var B=(t,e)=>{const n=t.__vccOpts||t;for(const[a,o]of e)n[a]=o;return n};const kt={},gt={class:"text-gray-500 mx-1"};function bt(t,e){return r(),i("span",gt,[P(t.$slots,"default")])}var ee=B(kt,[["render",bt]]);const wt={},Tt={class:"font-medium text-fuchsia-900"};function Ct(t,e){return r(),i("span",Tt,[P(t.$slots,"default")])}var E=B(wt,[["render",Ct]]);const St={class:""},Vt=x({props:{token:null},emits:["navigate"],setup(t){const e=$(!0);return(n,a)=>(r(),i("span",St,[s("span",null,[v(Z,{expanded:e.value,"onUpdate:expanded":a[0]||(a[0]=o=>e.value=o)},{default:S(()=>[v(E,null,{default:S(()=>[h(p(t.token.key),1)]),_:1}),v(ee,null,{default:S(()=>[h("["+p(t.token.items.length)+"]",1)]),_:1})]),_:1},8,["expanded"])]),(r(!0),i(k,null,H(t.token.items,(o,l)=>K((r(),i("div",{key:l,class:"ml-4 my-1"},[v(g(j),{token:o,onNavigate:a[1]||(a[1]=c=>n.$emit("navigate",c))},null,8,["token"])])),[[Y,e.value]])),128))]))}}),Rt={class:""},At=x({props:{token:null},emits:["navigate"],setup(t){const e=$(!0);return(n,a)=>(r(),i("span",Rt,[s("span",null,[v(Z,{expanded:e.value,"onUpdate:expanded":a[0]||(a[0]=o=>e.value=o)},{default:S(()=>[v(E,null,{default:S(()=>[h(p(t.token.key),1)]),_:1}),v(ee,null,{default:S(()=>[h("{"+p(Object.keys(t.token.properties).length)+"}",1)]),_:1})]),_:1},8,["expanded"])]),(r(!0),i(k,null,H(t.token.properties,(o,l)=>K((r(),i("div",{key:l,class:"ml-4 my-1"},[v(g(j),{token:o,onNavigate:a[1]||(a[1]=c=>n.$emit("navigate",c))},null,8,["token"])])),[[Y,e.value]])),128))]))}}),Ht={class:""},Ot=h(": "),qt=x({props:{token:null},emits:["navigate"],setup(t){const e=t,{isLinksObject:n,isRelationshipObjectLinks:a}=C.Specification.TypeGuards,o=O(()=>{if(typeof e.token.value=="number")return"number";if(e.token.value===!0||e.token.value===!1)return"boolean";if(e.token.value===null)return"null";if(e.token.parent){if((n(e.token.parent.value)||a(e.token.parent.value))&&e.token.parent.key==="links")return"link";if(C.Specification.TypeGuards.isLinkObject(e.token.parent.value)&&e.token.key&&e.token.key==="href")return"link"}return"string"}),l=O(()=>{switch(o.value){case"number":return"text-blue-900";case"boolean":return"text-blue-900";case"null":return"text-gray-500";case"link":return"text-gray-600 underline";case"string":default:return"text-red-700"}}),c=O(()=>{switch(o.value){case"number":return e.token.value;case"boolean":return e.token.value;case"null":return"null";case"link":return e.token.value;case"string":default:return`"${e.token.value}"`}});return(u,m)=>(r(),i("span",Ht,[v(E,null,{default:S(()=>[h(p(t.token.key),1)]),_:1}),Ot,s("span",{class:q(g(l))},[g(o)==="link"?(r(),i("a",{key:0,href:"#",onClick:m[0]||(m[0]=d=>u.$emit("navigate",e.token.value))},p(g(c)),1)):(r(),i(k,{key:1},[h(p(g(c)),1)],64))],2)]))}}),j=t=>{switch(t.token.type){case"array":return _(Vt,{token:t.token});case"object":return _(At,{token:t.token});case"value":return _(qt,{token:t.token});default:return}};function Nt(t){function e(n,a,o){let l={parent:n,key:a,value:o};if(o instanceof Array){l.type="array",l.items=[];const c=o.length;for(let u=0;u<c;u+=1)l.items.push(e(l,u,o[u]));return l}if(typeof o=="object"&&o!==null){l.type="object",l.properties={};for(const c in o)Object.prototype.hasOwnProperty.call(o,c)&&(l.properties[c]=e(l,c,o[c]));return l}return l.type="value",l}return e(void 0,void 0,t)}const Pt={class:"font-mono text-xs"},Bt=x({props:{document:null},emits:["navigate"],setup(t){const e=t,n=O(()=>Nt(e.document));return(a,o)=>(r(),i("div",Pt,[v(g(j),{token:g(n),onNavigate:o[0]||(o[0]=l=>a.$emit("navigate",l))},null,8,["token"])]))}}),Et=t=>{if(C.Specification.TypeGuards.isDataDocument(t.document)){if(C.Specification.TypeGuards.isFetchResourceIndividualResponse(t.document))return t.document.data===null?_("span","Resource not created"):_("span",["Resource ",_("b",`${t.document.data.type} #${t.document.data.id}`)]);if(C.Specification.TypeGuards.isFetchResourceCollectionResponse(t.document)){const e=[];return t.document.data.forEach(n=>{e.includes(n.type)||e.push(n.type)}),e.length===0?_("span","Resource collection empty"):_("span",["Resource collection of ",_("b",`${e.join(", ")}`)])}if(C.Specification.TypeGuards.isFetchRelationshipToManyResponse(t.document)){const e=[];return t.document.data.forEach(n=>{e.includes(n.type)||e.push(n.type)}),e.length===0?_("span","Relationship to-many empty"):_("span",["Relationship to-many of ",_("b",`${e.join(", ")}`)])}return C.Specification.TypeGuards.isFetchRelationshipToOneResponse(t.document)?t.document.data===null?_("span","Relationship to-one empty"):_("span",["Relationship to-one of ",_("b",t.document.data.type)]):_("span","Data document")}return C.Specification.TypeGuards.isMetaDocument(t.document)?_("span","Meta document"):C.Specification.TypeGuards.isErrorDocument(t.document)?_("span","Error document"):_("span","Unkown JSON:API document.")},jt={class:"md:container md:mx-auto px-1"},It={class:"my-3"},Lt={class:"my-3"},Gt={class:"my-2"},Ut={class:"my-3"},Jt={key:0,class:"text-gray-400"},Mt={key:0,class:"text-red-900"},Dt={key:1},Ft={key:0,class:"my-2"},Kt={class:"inline-flex flex-row border-2 w-auto mb-4"},Yt=x({setup(t){var G,U;const e=new de.FetchHttpAdapter(window.fetch.bind(window),{credentials:"omit",mode:"cors"}),n=new C.Client(e),a=$({credentials:(G=e.defaultInit)==null?void 0:G.credentials,mode:(U=e.defaultInit)==null?void 0:U.mode,headers:[]}),o=$(""),l=$("document"),c=$(),u=$(),m=$(!1),d=$(!0),y=$(),{pushState:w}=he(T=>{L(T)}),I=T=>{w(T),L(T)},L=T=>{o.value=T,y.value=void 0,c.value=void 0,u.value=void 0,n.fetch(T).then(f=>{d.value=f.isSuccess,m.value=!0,y.value=f.document?f.document:void 0,c.value=f.request,u.value=f.response}).catch(()=>{d.value=!1,m.value=!0,y.value=void 0})};return F(()=>a.value,()=>{n.defaultHttpHeaders=a.value.headers.reduce((V,J)=>A(R({},V),{[J.name]:J.value}),{});const{credentials:T,mode:f}=a.value;e.defaultInit={credentials:T,mode:f}}),(T,f)=>(r(),i("div",jt,[s("div",It,[s("div",Lt,[v(We,{onNavigate:I,location:o.value,"onUpdate:location":f[0]||(f[0]=V=>o.value=V)},null,8,["location"])]),s("div",Gt,[v(Ke,{modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=V=>a.value=V)},null,8,["modelValue"])])]),s("div",Ut,[m.value?(r(),i(k,{key:1},[d.value?b("",!0):(r(),i("p",Mt,"An error occured.")),y.value||c.value||u.value?(r(),i("div",Dt,[y.value?(r(),i("div",Ft,[v(g(Et),{document:y.value},null,8,["document"])])):b("",!0),s("div",Kt,[c.value?(r(),i("button",{key:0,class:q(["p-3 border-b-3 hover:bg-gray-100 font-semibold text-sm py-1",{"border-primary-800":l.value==="document","border-transparent":l.value!=="document"}]),onClick:f[2]||(f[2]=V=>l.value="document")}," Document ",2)):b("",!0),c.value?(r(),i("button",{key:1,class:q(["p-3 border-b-3 hover:bg-gray-100 font-semibold text-sm py-1",{"border-primary-800":l.value==="request","border-transparent":l.value!=="request"}]),onClick:f[3]||(f[3]=V=>l.value="request")}," Request ",2)):b("",!0),u.value?(r(),i("button",{key:2,class:q(["p-3 border-b-3 hover:bg-gray-100 font-semibold text-sm py-1",{"border-primary-800":l.value==="response","border-transparent":l.value!=="response"}]),onClick:f[4]||(f[4]=V=>l.value="response")}," Response ",2)):b("",!0)]),(r(),N(me,null,[l.value=="document"?(r(),i(k,{key:0},[y.value?(r(),N(Bt,{key:0,document:y.value,onNavigate:I},null,8,["document"])):b("",!0)],64)):l.value=="request"?(r(),i(k,{key:1},[c.value?(r(),N(rt,{key:0,request:c.value},null,8,["request"])):b("",!0)],64)):l.value=="response"?(r(),i(k,{key:2},[u.value?(r(),N(yt,{key:0,response:u.value},null,8,["response"])):b("",!0)],64)):b("",!0)],1024))])):b("",!0)],64)):(r(),i("p",Jt,"No request made yet."))])]))}}),zt={class:"md:container md:mx-auto px-1"},Wt={class:"my-4"},Qt=s("h1",{class:"text-4xl my-4"},"About",-1),Xt=s("div",{class:"my-4"},[s("p",null,[h("Browser for web API implementing "),s("a",{class:"text-primary-800 hover:text-primary-900 font-semibold",href:"https://jsonapi.org/"},"JSON:API v1.0"),h(".")])],-1),Zt=s("h2",{class:"text-2xl my-2"},"Configuration",-1),es=h("The server needs to configure "),ts=s("a",{class:"text-primary-800 hover:text-primary-900 font-semibold",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"},"CORS",-1),ss=h(" and allow HTTP GET request from the origin "),ns=h("."),os={class:"my-2"},as=s("h3",{class:"text-lg my-2"},"Example server HTTP response headers",-1),ls={class:"my-2"},rs={class:"text-sm"},is=s("pre",{class:"text-sm"},"Access-Control-Allow-Methods: GET",-1),us=s("h2",{class:"text-2xl my-2"},"Source code",-1),cs=s("p",null,[h("The source code is available on GitHub "),s("a",{class:"text-primary-800 hover:text-primary-900 font-semibold",href:"https://github.com/masterT/jsonapi-browser"},"https://github.com/masterT/jsonapi-browser"),h(".")],-1),ds=x({setup(t){const e=$("");return e.value=window.location.origin,(n,a)=>(r(),i("div",zt,[s("div",Wt,[Qt,Xt,Zt,s("p",null,[es,ts,ss,s("code",null,p(e.value),1),ns]),s("div",os,[as,s("div",ls,[s("pre",rs,"Access-Control-Allow-Origin: "+p(e.value),1),is])]),us,cs])]))}}),ms=[{path:"/",alias:"/browser",component:Yt},{path:"/about",component:ds}],ps=pe({history:_e(),routes:ms}),_s={},fs={class:"md:container md:mx-auto my-6 px-1"},vs={class:"flex justify-between items-baseline"},hs=s("h1",{class:"sm:text-5xl text-2xl"}," JSON:API Browser ",-1),ys={class:"flex"},xs={class:"mr-6 text-lg font-medium"},$s=h("Browser"),ks={class:"mr-6 text-lg font-medium"},gs=h("About");function bs(t,e){const n=z("router-link");return r(),i("div",fs,[s("header",vs,[hs,s("nav",null,[s("ul",ys,[s("li",xs,[v(n,{class:"text-primary-800 hover:text-primary-900 font-semibold",to:"/"},{default:S(()=>[$s]),_:1})]),s("li",ks,[v(n,{class:"text-primary-800 hover:text-primary-900 font-semibold",to:"/about"},{default:S(()=>[gs]),_:1})])])])])])}var ws=B(_s,[["render",bs]]);const Ts=x({setup(t){return(e,n)=>{const a=z("router-view");return r(),i(k,null,[v(ws),v(a)],64)}}});fe(Ts).use(ps).mount("#app");export{Ss as __vite_legacy_guard};
